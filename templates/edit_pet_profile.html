{% extends 'base.html' %}

{%block title %}Pet Family{% endblock %}

{% block header %}Edit Pet Profile{% endblock %}

{% block content %}
<h2>Edit Pet Profile</h2>


<form method="POST" action="{{ url_for('pets.edit_pet_profile', pet_id=pet.id) }}" enctype="multipart/form-data">
    {{ form.hidden_tag() }}

    <div>
        {{ form.name.label }}
        {{ form.name }}
    </div>



    <div id="exact-birthday">
        {{ form.birthday.label }}
        {{ form.birthday }}
    </div>

    <div class="form-check">
        <input type="checkbox" id="approximate-toggle" class="form-check-input" onchange="toggleBirthFields()">
        <label for="approximate-toggle" class="form-check-label">
            I don't know the exact birthday
        </label>
    </div>


    <div id="approx-birthday" style="display: none;">
        {{ form.birth_year.label }}
        {{ form.birth_year }}

        {{ form.birth_month.label }}
        {{ form.birth_month }}
    </div>

    <div>
        {{ form.species.label }}
        {{ form.species }}
    </div>

    <div>
        {{ form.subspecies.label }}
        {{ form.subspecies }}
    </div>


    <div>
      {{ form.gender.label }}
      {{ form.gender }}
    </div>

    <div>
        {{ form.profile_picture.label }}
        {{ form.profile_picture }}
    </div>

    <div>
        {{ form.profile_description.label }}
        {{ form.profile_description  }}
    </div>

    <div style="text-align: center;">
        {{ form.submit(class="btn", value="Submit Changes") }}
    </div>

</form>
{% endblock %}

{% block scripts %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const checkbox = document.getElementById('approximate-toggle');
    const exact = document.getElementById('exact-birthday');
    const approx = document.getElementById('approx-birthday');

    function toggleBirthFields() {
      if (checkbox.checked) {
        exact.style.display = 'none';
        approx.style.display = 'block';
      } else {
        exact.style.display = 'block';
        approx.style.display = 'none';
      }
    }

    checkbox.addEventListener('change', toggleBirthFields);
    toggleBirthFields(); // initial state
  });
</script>

{% endblock %}